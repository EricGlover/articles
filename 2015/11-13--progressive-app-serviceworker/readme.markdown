<div></div>

<h1>Making a Progressive App with ServiceWorker</h1>

<p><kbd>serviceworker</kbd> <kbd>progressive-enhancement</kbd> <kbd>progressive-apps</kbd></p>

<blockquote><p>In previous articles, you&#x2019;ve learned about <a href="https://ponyfoo.com/articles/serviceworker-revolution" aria-label="ServiceWorker: Revolution of the Web Platform on Pony Foo">how to use <code>ServiceWorker</code></a>, the different strategies that you can leverage to <a href="https://ponyfoo.com/articles/progressive-networking-serviceworker" aria-label="ServiceWorker and Progressive Networking">serve content offline and faster</a>, and all &#x2026;</p></blockquote>

<div><p>In previous articles, you&#x2019;ve learned about <a href="https://ponyfoo.com/articles/serviceworker-revolution" aria-label="ServiceWorker: Revolution of the Web Platform on Pony Foo">how to use <code class="md-code md-code-inline">ServiceWorker</code></a>, the different strategies that you can leverage to <a href="https://ponyfoo.com/articles/progressive-networking-serviceworker" aria-label="ServiceWorker and Progressive Networking">serve content offline and faster</a>, and all the ways in which you can <a href="https://ponyfoo.com/articles/serviceworker-messagechannel-postmessage" aria-label="ServiceWorker, MessageChannel, &amp; postMessage">communicate between a <code class="md-code md-code-inline">ServiceWorker</code> and web pages</a>, let&#x2019;s see how we can leverage <code class="md-code md-code-inline">ServiceWorker</code> for the greater good.</p></div>

<div></div>

<div><p>Progressive Web Apps attempt to solve the infamous <strong>&#x201C;Install our app, we are begging you&#x201D;</strong> interstitial banner that usually gets in the way, because most people just want to interact with your website. Instead, the progressive way shows a consistent and unobtrusive <em>&#x201C;Add to Home Screen&#x201D;</em> popup. If the user clicks on the button, a shortcut to your website will be created in their phone <em>&#x2013; instead of redirecting them to an App Store, further disrupting their experience.</em></p> <p>The animation below shows how the UX for the Add to Home Screen feature flows.</p> <p><a href="https://developers.google.com/web/updates/2015/03/increasing-engagement-with-app-install-banners-in-chrome-for-android" target="_blank" aria-label="Increasing engagement with Web App install banners"><img src="https://developers.google.com/web/updates/images/2015-03-03/add-to-home-screen.gif" alt="Add to Home Screen Experience Demonstration"></a></p> <p>Once the website is installed to their home screen, the user is able to open it as if it were any other app in full screen. There&#x2019;s some configurable settings, but you&#x2019;d probably want to have the app look and feel as close as a native application as possible.</p></div>

<div><p>Progressive Web Apps have <em>several</em> requirements.</p> <h1 id="requirements">Requirements</h1> <p>First off, you&#x2019;ll need <code class="md-code md-code-inline">ServiceWorker</code> to be installed and activated to be able to make a website into a progressive app. That means you need to:</p> <ul> <li>Understand Promises (<a href="https://ponyfoo.com/articles/es6-promises-in-depth" aria-label="ES6 Promises in Depth on Pony Foo">article</a>, <a href="http://bevacqua.github.io/promisees/" target="_blank" aria-label="Promisees Visualization Tool">visualization</a>)</li> <li>Implement secure conenctions (<a href="https://ponyfoo.com/articles/securing-your-web-app-in-3-easy-steps" aria-label="Securing Your Web App in 3 Easy Steps on Pony Foo">using CloudFlare</a>, <a href="https://letsencrypt.org/" target="_blank" aria-label="Let&apos;s Encrypt encrypts the web for free">LetsEncrypt</a>)</li> <li>Implement <code class="md-code md-code-inline">ServiceWorker</code> (<a href="https://github.com/bevacqua/flickr-lightbox" target="_blank" aria-label="bevacqua/flickr-lightbox on GitHub">demo</a>, <a href="https://css-tricks.com/serviceworker-for-offline/" target="_blank" aria-label="Making a Simple Site Work Offline with ServiceWorker on CSS-Tricks">tutorial</a>, <a href="https://ponyfoo.com/articles/serviceworker-revolution" aria-label="ServiceWorker: Revolution of the Web Platform on Pony Foo">article</a>)</li> </ul> <p>The upside is that most of these requirements are great things to do. Understanding promises, even if you don&#x2019;t particularly like them, is a necessity now that they&#x2019;re embedded into the language and being relied upon by web API interfaces such as <code class="md-code md-code-inline">fetch</code> and most of the API related to <code class="md-code md-code-inline">ServiceWorker</code>. Secure connections are now easier than ever with tools like CloudFlare and LetsEncrypt. Encryption is a necessity for any serious business, and a nice addition to &#x201C;hobby&#x201D; websites like this blog. Finally, <code class="md-code md-code-inline">ServiceWorker</code> should be a no-brainer for every single website out there. The fine grained control over network requests, caching, and the ability to keep a site functional even when humans are offline are all immensely helpful.</p> <p>Once you&#x2019;ve checked off all the requirements mentioned above, implementing a progressive web app is super easy!</p> <h1 id="implementing-progressive-web-apps">Implementing Progressive Web Apps</h1> <p>The next thing you&#x2019;ll need, once you&#x2019;ve completed the requirements, is to put together a <code class="md-code md-code-inline">manifest.json</code>. Tutorials about the manifest format are scarce, but <a href="https://w3c.github.io/manifest/" target="_blank" aria-label="Web App Manifest Specification">the specification is simple enough</a> that you can browse it for things you want to configure &#x2013; such as the <code class="md-code md-code-inline">name</code>, <code class="md-code md-code-inline">orientation</code>, or the <code class="md-code md-code-inline">display</code> options. Here&#x2019;s the one I&#x2019;m using for Pony Foo.</p> <pre class="md-code-block"><code class="md-code md-lang-json">{
  &quot;<span class="md-code-attribute">short_name</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;Pony Foo&quot;</span></span>,
  &quot;<span class="md-code-attribute">name</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;Pony Foo&quot;</span></span>,
  &quot;<span class="md-code-attribute">start_url</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;/&quot;</span></span>,
  &quot;<span class="md-code-attribute">display</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;standalone&quot;</span></span>,
  &quot;<span class="md-code-attribute">orientation</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;landscape&quot;</span></span>,
  &quot;<span class="md-code-attribute">lang</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;en&quot;</span></span>,
  &quot;<span class="md-code-attribute">icons</span>&quot;: <span class="md-code-value">[{
    &quot;<span class="md-code-attribute">src</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;/apple-touch-icon-144x144-precomposed.png&quot;</span></span>,
    &quot;<span class="md-code-attribute">sizes</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;144x144&quot;</span></span>,
    &quot;<span class="md-code-attribute">type</span>&quot;: <span class="md-code-value"><span class="md-code-string">&quot;image/png&quot;</span>
  </span>}]
</span>}
</code></pre> <p>Once you&#x2019;ve put together your <code class="md-code md-code-inline">manifest.json</code>, you&#x2019;ll have to link to it from your pages, like so:</p> <pre class="md-code-block"><code class="md-code md-lang-xml"><span class="md-code-tag">&lt;<span class="md-code-title">link</span> <span class="md-code-attribute">rel</span>=<span class="md-code-value">&apos;manifest&apos;</span> <span class="md-code-attribute">href</span>=<span class="md-code-value">&apos;/manifest.json&apos;</span>&gt;</span>
</code></pre> <p>In order to support older mobile browsers, you should also include the following meta tag.</p> <pre class="md-code-block"><code class="md-code md-lang-xml"><span class="md-code-tag">&lt;<span class="md-code-title">meta</span> <span class="md-code-attribute">name</span>=<span class="md-code-value">&apos;mobile-web-app-capable&apos;</span> <span class="md-code-attribute">content</span>=<span class="md-code-value">&apos;yes&apos;</span>&gt;</span>
</code></pre> <p>You&#x2019;ll also need a <code class="md-code md-code-inline">&lt;link&gt;</code> to an image of your site&#x2019;s icon. You might want to check out the writings on <a href="https://mathiasbynens.be/notes/touch-icons#icons" target="_blank" aria-label="Everything you always wanted to know about touch icons">article on touch icons</a> from Mathias Bynens, or maybe just <a href="https://github.com/ponyfoo/ponyfoo/blob/b0b633f49c940611f806e751a2fb9876cde57a76/views/server/layout/layout.jade#L20-L29" target="_blank" aria-label="ponyfoo/ponyfoo on GitHub">take a look at the icons I&#x2019;m using</a> for this blog.</p> <pre class="md-code-block"><code class="md-code md-lang-xml"><span class="md-code-tag">&lt;<span class="md-code-title">link</span> <span class="md-code-attribute">rel</span>=<span class="md-code-value">&apos;icon&apos;</span> <span class="md-code-attribute">sizes</span>=<span class="md-code-value">&apos;192x192&apos;</span> <span class="md-code-attribute">href</span>=<span class="md-code-value">&apos;icon-192x192.png&apos;</span>&gt;</span>
</code></pre> <p>That&#x2019;s about it.</p> <blockquote> <p>Of course, you need to implement <code class="md-code md-code-inline">ServiceWorker</code> first, and that&#x2019;s a pretty big leap, but given that <code class="md-code md-code-inline">ServiceWorker</code> is a progressive technology, it&#x2019;s <strong>completely risk-free to implement</strong> <em>today</em>. You&#x2019;ll get the benefits in supporting browsers and those that don&#x2019;t support <code class="md-code md-code-inline">ServiceWorker</code> will simply ignore your <code class="md-code md-code-inline">ServiceWorker</code>. Eventually, those browsers will become up to date and support <code class="md-code md-code-inline">ServiceWorker</code> too, and your site will immediately get ahead the pack in those cases as well!</p> </blockquote></div>
